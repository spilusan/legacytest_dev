<?php

$countryRestricted = ((int) $this->supplier->countryRestricted === 1);
$config  = Zend_Registry::get('config');
$imageUrlPrefix = $config->shipserv->services->catalogue->images->urlPrefix;
$catalogueList = ($this->supplier->catalogues) ?  $this->supplier->catalogues : array();
$supplierHomePageUrl = null;

if ($this->supplier->homePageUrl && strlen(trim($this->supplier->homePageUrl)) > 0) {
	// As our data is not sructured well and some supplier URL has no HTTP or HTTP we try to load over HTTP and hope if it redirects if it supports HTTPS
	// @todo, we could do an internal test if supports HTTPS to figure out, but it would be additional load and hacky solution
	$trimmedUrl = trim($this->supplier->homePageUrl);
	$supplierHomePageUrl = (preg_match('/^https?:\/\//i', $trimmedUrl)) ? $trimmedUrl : 'http://' . $trimmedUrl;
}

$this->getHelper('Requirejs')->addModule('backbone/catalogue/views/mainView');
$this->headScript()->appendFile('/js/lib/fancybox/jquery.fancybox-1.3.4.pack.js');
$this->headLink()->appendStylesheet('/css/fancybox/jquery.fancybox-1.3.4.css');
$this->headLink()->appendStylesheet('/css/supplier-catalogue.css');
$this->getHelper('Requirejs')->addDefinition('reports/tnid', json_encode($this->supplier->tnid));
$this->getHelper('Requirejs')->addDefinition('reports/imageUrl', json_encode($imageUrlPrefix));
 
if($this->supplier->description){
	$metaDesc = nl2br(strip_tags($this->supplier->description));
	$metaDesc = substr($metaDesc, 0, 159);
	$this->headMeta()->appendName('description', $metaDesc);
}
else if ($this->metaDescription){
	$this->headMeta()->appendName('description', $this->metaDescription);
}

if ($this->metaKeywords)
{
	$this->headMeta()->appendName('keywords', $this->metaKeywords);
}

//Add some opengra\ph tags for Social Network integration
$unicodeReplace = new Shipserv_Unicode();
//
$doctypeHelper = new Zend_View_Helper_Doctype();
$doctypeHelper->doctype('XHTML1_RDFA');//

if(!empty($this->supplier->logoUrl)){
     $this->headMeta()->headMeta($this->supplier->logoUrl, "og:image", $keyType = "property");
}

$opTitle = $this->supplier->name . ", " . $this->supplier->city . ", " . $this->supplier->countryName . " | ShipServ.com";
$this->headMeta()->headMeta($unicodeReplace->UTF8entities($opTitle), "og:title", $keyType = "property");
$this->headMeta()->headMeta($unicodeReplace->UTF8entities($this->supplier->description), "og:description", $keyType = "property");

$address = $this->supplier->getAddress(true, true);

$contactDets = $this->supplier->getContactDetail();
if(substr($contactDets['url'], 0, 7) != "http://" && substr($contactDets['url'], 0, 8) != "https://"){
	$contactDets['url'] = "http://".$contactDets['url'];
}

if($this->supplier->latitude && $this->supplier->longitude){
	$latlong = $this->supplier->latitude.",".$this->supplier->longitude;
}
else {
	$latlong = "false";
}

$this->googledfp()->addTargeting('keywords','ALL');
$this->googledfp()->addTargeting('country','ALL');
$this->googledfp()->addTargeting('port','ALL');
$this->googledfp()->addTargeting('supplier','ALL');

// Canonical link to ensure Google doesn't confuse different URLs for the same profile

// including javascript file using requireJS
$isLoggedIn = ($this->user == false) ? 0 : 1;
$hasCompletedDetailedForm = ($this->user !== false && $this->user->hasCompletedDetailedInformation() )?1:0;
$getProfileRecId = ($this->getProfileRecId == false ? 0 : $this->getProfileRecId);
$SupTnid = $this->supplier->tnid;

$this->getHelper('Requirejs')->addModule('supplier/inviteBrandOwnerForm');
$this->getHelper('Requirejs')->addModule('backbone/supplier/profile/views/mainView');
//$this->getHelper('Requirejs')->addDefinition('mixpanel/apikey','"' . $this->mixpanelApiKey . '"');
//$this->getHelper('Requirejs')->addModule('supplier/survey');
$this->getHelper('Requirejs')->addModule('supplier/profile-completeness')
							//  ->addModule('backbone/user/login/views/loginPopView')
							 ->addDefinition('/user/isLoggedIn', $isLoggedIn)
							 ->addDefinition('/user/getProfileRecId', $getProfileRecId)
							 ->addDefinition('/user/hasCompletedDetailedInfo', $hasCompletedDetailedForm)
							 ->addDefinition('/user/sTnid', $SupTnid);
							 
$this->CDNLink()->appendStylesheet('/css/endorsements.css');
$this->CDNLink()->appendStylesheet('/css/textboxlist.css');
$this->CDNLink()->appendStylesheet('/css/supplier/supplier.css');
$this->CDNLink()->appendStylesheet('/css/uniform.default.new.css');
$this->CDNLink()->appendStylesheet('/css/login.css');
$this->CDNLink()->appendStylesheet('/css/supplier/supplier-extra.css');
$this->CDNLink()->appendStylesheet('/css/tooltip.css');
$this->CDNLink()->appendStylesheet('/css/shipserv-tooltip.css');

$this->headScript()->appendFile('/js/jquery.easing.js')
					->appendFile('/js/jquery.auto-complete.js')
					->appendFile('/js/jquery.filetree.js')
					->appendFile('/js/jquery.urlparse.js')
					->appendFile('/js/json2.js')
					->appendFile('/js/jquery.modalwindows.js')
					->appendFile('/js/jquery.jsoncookie.js')
					->appendFile('/js/jquery.cookie.min.js')
					->appendFile('/js/jquery.tooltip.js')
					->appendFile('/js/jquery.metadata.js')
					->appendFile('/js/jquery.urlencode.js')
					->appendFile('/js/jquery.textboxlist.js')
					->appendFile('/js/jcarousellite_1.0.1.min.js')
					->appendFile('/js/jquery.supplierdetail.js')
                    ->appendFile('/js/modules/backbone/lib/jquery.shipserv-tooltip.js')
					->prependScript('
						if (!window.SS) var SS = {};
						SS.defaultTab = "'.$this->defaultTab.'";
				   ')
				   ->appendFile('//apis.google.com/js/plusone.js');

$targetedAdSlot = $this->supplier->getGoogleTargetedSearch();

if( lg_count($targetedAdSlot) === 0 )
{
	$this->googledfp()->add('TargetedOrGeneralAdSlot1');
	$this->googledfp()->add('TargetedOrGeneralAdSlot2');
	$this->googledfp()->add('TargetedOrGeneralAdSlot3');
}
else
{
	foreach( (array) $targetedAdSlot as $slot)
	{
		$this->googledfp()->add($slot['PAP_ADUNIT_ID']);
	}
}

$this->googledfp()->render();

$this->headScript()->prependScript('
		if (!window.SS) var SS = {};
		SS.defaultTab = "'.$this->defaultTab.'";
		')
		->appendFile('//apis.google.com/js/plusone.js');

$breadcrumbs[] = array('name' => 'ShipServ Pages', 'url'  => '/search');
// if profile view is coming from SERPS
if( $this->backToSearch()->getUrl() != "" )
{
	$breadcrumbs[] = array('name' => 'Search Results', 'url'  => $this->backToSearch()->getUrl());
}
// otherwise use supplier list
else
{
	$breadcrumbs[] = array('name' => 'Supplier list', 'url'  => '/supplier/browse/');
}
$breadcrumbs[] = array('name' => $this->supplier->name,	'url'  => '');
$integration = ($this->user !== false )?$this->user->canSeeContactViewDetailEasily():false;
if ((int)Myshipserv_Config::getIni()->google->services->maps->display === 1) {
?>
    <script src="https://maps.googleapis.com/maps/api/js?key=<?php echo $this->googleMapsApiKey; ?>&sensor=false" type="text/javascript"></script>
<?php
}
?>
<script type="text/javascript" charset="utf-8">
<!--
var isLoggedIn = <?php echo ($this->user == false) ? 'false' : 'true'; ?>;

var user = [];
user.name = '<?php echo ($this->user == false) ? '' : $this->user->username; ?>';
user.id = '<?php echo ($this->user == false) ? '' : $this->user->userId; ?>';
var getProfileRecId = '<?php echo $this->getProfileRecId;?>';

var supplierTnid = <?php echo $this->supplier->tnid; ?>;
$(document).ready(function() {
	var cnt = 0;
	$('body').ajaxStart(function(){
		cnt ++;
		$(".content_body").html('<div style="margin:100px;"><img src="/images/longloader.gif"/></div>');
	});

	$('body').ajaxStop(function(){
		if(cnt == 2){
			$(".content_body").html('');
		}
	});

    $('.cHelp').hover(function(e){
		$(e.target).find('.tooltip').show();
	}, function(e){
		$(e.target).find('.tooltip').hide();
	});

    var thisAnchor = jQuery.url.attr("anchor") ? jQuery.url.attr("anchor") : '';
	if (thisAnchor.split('/')[0] == 'catalogue')
	{
		<?php if ($this->catQuery) {?>
			 $('input#query').attr('value','<?php echo $this->catQuery ?>');
		<?php
		} ?>
	}

	// ALL THIS CODE NEEDS TO BE ON THIS PAGE AS IT PULLS INFO FROM THE PHP ARRAY
	// This JS is for the Catalogue Side Nav

	function openFile (file)
	{
		$.get('/supplier/catalogue/format/html/',
		{
			catId: (file),
			itemStart: 0,
			itemRows: 10
		},
		function(data){
			$(".content_body").html('');
			$(".content_body").html('<div style="margin:100px;"><img src="/images/longloader.gif"/></div>');
			$(".content_body").html(data);
		});
		$(".file").removeClass('expanded_file').addClass('collapsed');
		$("#"+(file)).removeClass('collapsed').addClass('expanded_file');
	};

    var thisAnchor = jQuery.url.attr("anchor") ? jQuery.url.attr("anchor") : '';
	var anchor = thisAnchor.split('/')[0];

	if (anchor != 'catalogue') {

		$('#sidebar_nav').fileTree({
			root: '',
			script: "/supplier/list/format/html/tnid/<?echo $this->supplier->tnid; ?>/catId/<?php
				if ($this->supplier->catalogues)
				{
					foreach ($this->supplier->catalogues as $catalogue)
					{
						echo $catalogue['id'];
					}
				}
				else
				{
					echo "''";
				} ?>",
			folderEvent: 'click',
			expandSpeed: 750,
			collapseSpeed: 750,
			multiFolder: false,
			loadMessage: "Loading..." },
			function(file) {
				openFile(file);
			});
	}

	// This JS is for the Enquiry Basket Cookie
	$('#sendEnquiryButton').live('click', function() {
		var tnid = '<?php echo $this->supplier->tnid; ?>';
		var o = $.JSONCookie('<?php echo $this->basketCookie['name']; ?>');

		if (o)
		{
			var suppliers = o.suppliers, i = 0;
			for (s in suppliers) {
				i++;
			}

			if (i == 1 && suppliers[tnid] != '') {
				return true;
			}

			return confirm('You currently have other suppliers selected. Click OK to clear this list and send an individual RFQ to this supplier, or Cancel to continue browsing');
		}

		return true;
	});

	$(".sidewidget input:checkbox").live('click',function() {
		var o = $.JSONCookie('<?php echo $this->basketCookie['name']; ?>');
		if (this.checked) {
			if (o == null || !o.suppliers) {
				o.suppliers = new Object();
			}

			var tnid = this.id;

			o.suppliers[tnid] = $("#tnid-name-" + tnid).val();
		} else {
			var tnid = this.id;
			delete o.suppliers[tnid];
		}

		$.JSONCookie('<?php echo $this->basketCookie['name']; ?>', o, { domain: '<?php echo $this->basketCookie['domain']; ?>',
																		path: '<?php echo $this->basketCookie['path']; ?>' });
	});

});
//-->
</script>

<input type="hidden" name="tnid-name-<?php echo $this->supplier->tnid; ?>" id="tnid-name-<?php echo $this->supplier->tnid; ?>" value="<?php echo trim($this->supplier->name); ?>" />

<div id="main_content_area">

    <?php if (preg_match('/https?:\/\/.*\.shipserv.com\/(impa-catalogue|impaweb)/i', $this->referrer)): ?>
        <div class="back-to-impa">
            <a href="<?echo $this->referrer; ?>">Back to IMPA Marine Stores guide &gt;</a>
        </div>
    <?php endif ?>
    
    <?php
    	//render search bar
		echo $this->partial('searchbar.phtml', array('searchWhat'    => $this->searchValues['searchWhat'],
													 'searchText'    => $this->searchText,
													 'searchWhere'   => $this->searchValues['searchWhere'],
													 'supplierCount' => $this->supplierCount,
													 'currentZoneIdent'	 => $this->currentZoneIdent,
													 'zone'		 => $zone));
    	echo $this->partial('profile/breadcrumbs.phtml', array('breadcrumbs' => $breadcrumbs));
    ?>

	<div class="clear"></div>

	<div class="content_wide">

		<?php
		// Currently this is showing only for premium listings David's request, SPC-3449 @todo add back if there is a better solution to handle these.
		if ($this->competitors && $this->supplier->premiumListing) {
			echo $this->partial('supplier/competitors.phtml', array('competitors' => $this->competitors, 'supplier'    => $this->supplier));
		}
		?>

		<div class="content_wide_header">

			<?php
			if (strlen($this->supplier->name) > 50)
			{
				$fontSize = '18px';
			}
			elseif (strlen($this->supplier->name) > 62)
			{
				$fontSize = '17px';
			}
			?>

			<h1 class="profile" <?php if ($fontSize) echo 'style="font-size: '.$fontSize.';"'; ?>><?php echo $this->supplier->name; ?></h1>

			<h2>
				<?php
				// displaying location
				/*
				if( $this->supplier->city != "" && $this->supplier->city != "-" ) $loc[] = $this->supplier->city;
				if( $this->supplier->state && $this->supplier->state != "" && $this->supplier->state != "-" ) $loc[] = $this->supplier->state;
				if( $this->supplier->countryName != "" && $this->supplier->countryName != "-" ) $loc[] = $this->supplier->countryName;
				echo implode(', ', $loc);
				*/
				$stringHelper  = $this->string();
				echo $stringHelper->formatAddress($this->supplier->city, $this->supplier->state, $this->supplier->countryName);
				?>
			</h2>

            <?php if ($countryRestricted === true): ?>
                <span rel="nofollow" class="send_enquiry_button_disabled restrictedToolTip" target="_blank" data-tooltipelement="restrictedToolTip"></span>
			<?php else: ?>
				<a href="/supplier/profile/s/<?=$this->supplierUrlPart?>#contact_box" class="contact_supplier_button contact_toggle">
						Contact Supplier
				</a>
            <?php endif ?>
		</div>
		<div class="content_wide_nav">
			<ul>
				<li class="<?=$this->defaultTab == 'profile' ? 'on' : 'off'?>" id="profile_toggle"><a href="/supplier/profile/s/<?=$this->supplierUrlPart?>#" class="profile_toggle">Profile</a></li>
				<li class="off" id="contact_toggle"><a href="/supplier/profile/s/<?=$this->supplierUrlPart?>#contact_box" class="contact_toggle">Contact Supplier</a></li>
				<li class="<?=$this->defaultTab == 'reviews' ? 'on' : 'off'?>" id="reviews_toggle"><a href="/reviews/supplier/s/<?=$this->supplierUrlPart?>#reviews" class="reviews_toggle" id="reviewsToggleText_">Reviews</a></li>
				<?php
				if ($this->supplier->onlineCatalogue) {
					?>
					<li class="off" id="catalogue_toggle"><a class="catalogue_toggle" href="/supplier/profile/s/<?=$this->supplierUrlPart?>#catalogue">Catalogue</a></li>
					<?php
				}
				?>
			</ul>

			<?php
			if ($this->supplier->onlineCatalogue) {
				?>
                <div class="search_wide_nav">
					<input type="text" name="query" id="query" class="query" placeholder="Search Catalogue" value="" />
					<input type="image" src="<?php echo $this->CDNLink()->image('/images/layout_v2/buttons/magnifer.gif'); ?>" class="magnifer" id="magnifer" />
				</div>
				<?php
			}
			?>
		</div>

		<div class="content_wide_body">

			<div id="profile" <?if($this->defaultTab != 'profile'):?>style="display: none;"<?endif?>>
			<div id="topProfileIcons" style="position:relative;top:15px;left:10px;">
               	<?php echo $this->partial('supplier/traderank-widget.phtml', array('supplier' => $this->supplier, 'supplierReviewCount' => $this->supplierReviewCount));
               	?>
				<?php
				if ($this->supplier->smartSupplier) {
					?>
					<!-- <div id="membership_popup" class="smartSupplierButton">Smart Supplier</div> -->
					<a href="/info/pages-for-suppliers/increase-quote-rate-win-rate/optimise-order-management-with-smartsupplier/" target="_blank" class="smartSupplierButton pointer">Smart Supplier</a>
					
					<?php
				}

				if ($this->supplier->expertSupplier) {
					?>
					<div id="membership_popup" class="expertSupplierButton">Expert Supplier</div>
					<?php
				}
				if ($this->supplier->hasEInvoicing()) {
                    ?>
                    <div class="eInvoiceButton einvoice_icon">e-Invoicing</div>
                    <?php
                }
                if ($this->supplier->hasBrandVerification()) {
                	?>
					<a href="/info/pages-for-suppliers/increase-brand-awareness/brand-zone" target="_blank">
						<div class="brandVerificationButton"></div>
					</a>
                    <?php
                }
				?>
				<div class="clear"></div>
			</div>

			<div class="content_wide_body_left" style="width:430px;margin-left:20px">
				<?php
					// profile completion
					if($this->user !== false && ( $this->user->isShipservUser() || $this->user->isPartOfSupplier($this->supplier->tnid))) {
						echo $this->partial('supplier/profile-completion.phtml', array('userCompanyHelper' => $this->userCompanyHelper, 'tnid' => $this->supplier->tnid, 'supplier'=> $this->supplier, 'mode' => 'full', 'user' => $this->user));
					}
				?>

					<?php
						/*
						// disabled as requested by Mervin, David, etc.
						if( $this->config['shipserv']['supplier']['dt']['tnid'] == $this->supplier->tnid )
						{?>
							<script type="text/javascript">
								$(document).ready(function(){
									$('div.marketingbox').bind('click', function(e){
										e.preventDefault();
										location.href = "/enquiry/index/clearBasket/1/tnid/"+<?=$this->supplier->tnid?>
									});
								});
							</script>
							<div class="zz button red medium dealhead">Deal of the month</div>
							<div class="clear"></div>
							<div class="marketingbox">
								<div class="product">
									<h2>Maritime Drill Set</h2>
									<ul>
										<li><strong>170 drills</strong></li>
										<li>10 pc each drill up to 8,0 mm</li>
										<li>5 pcs each drill from 8,5 mm</li>
										<li>Designed for onboard use</li>
										<li>Easy to carry metal case</li>
									</ul>
								</div>
								<img src="/img/supplier/dt/dealBanner.png" border="0" alt="Deal of the month" />
								<div class="clear"></div>
								<h1>How to buy:</h1>
								<ul class="small">
									<li>Use ShipServ Pages and enter <strong>DT1</strong> into RFQ line item description.</li>
									<li>Send RFQ via your purchasing system using TradeNet <strong>TNID <?=$this->supplier->tnid;?></strong>, enter <strong>DT1</strong> into RFQ line item description.</li>
								</ul>
							</div>
							<div class="clear"></div>
						<?}
						*/
					?>
				<p class="desc">
					<?php echo nl2br(strip_tags($this->supplier->description, '<strong><a>'));?>
				</p>

				<?php
				if (is_array($this->supplier->videos) && lg_count($this->supplier->videos) > 0) {
					echo $this->partial('supplier/video.phtml', array('videos' => $this->supplier->videos));
				}

				if ($this->supplier->maAttachments) {
					$thumbCount = 0;
					?>
					<div class="section_header">

					</div>

					<div class="ma-attachments">
						<ul>
							<?php
							foreach ($this->supplier->maAttachments as $attachment) {
								if (!is_array($attachment['thumbnailUrls']) && isset($attachment['thumbnailUrl'])) {
									$attachment['thumbnailUrls'] = explode(' ', $attachment['thumbnailUrl']);
								}

								foreach ($attachment['thumbnailUrls'] as $thumbnailUrl) {
									$url = Myshipserv_Helper_CdnDecorate::decorateImgUrl($attachment['url'], true);
									$thumbnailUrl = Myshipserv_Helper_CdnDecorate::decorateImgUrl($thumbnailUrl, true);
									$thumbCount++;
									?>
									<li><a href="<?php echo $url; ?>" target="_blank"><img width="191" height="263" src="<?php echo $thumbnailUrl; ?>" alt="" /></a></li>
									<?php
								}
							}
							?>
						</ul>
					</div>

					<?php
					if ($thumbCount > 2) {
						?>
						<div class="ma-buttons">
							<a href="#" class="prev">&laquo; &laquo; Prev</a>
							<a href="#" class="next">Next &raquo; &raquo;</a>
						</div>
						<?php
					}
					?>

					<script type="text/javascript">
						$(function() {
							$(".ma-attachments").jCarouselLite({
								<?php
								if ($thumbCount > 2)
								{
									?>
									btnNext: ".next",
									btnPrev: ".prev",
									<?php
								}
								?>
								visible: 2
							});
						});
					</script>
					<?php
				}
				$tradingHistory = $this->supplier->getTradingHistory(true);
				$totalRawTradingHistory = lg_count( $this->supplier->getTradingHistory() );

				if ($totalRawTradingHistory > 0) {
					echo $this->partial('supplier/trading-history.phtml', array('supplierUrlPart' => $this->supplierUrlPart, 'data' => $tradingHistory, 'supplier' => $this->supplier, 'total' => $totalRawTradingHistory) );
				}
				?>
				<div class="content_supplier_full_wrapper">
					<?php if ($countryRestricted === true): ?>
						<span rel="nofollow" class="send_enquiry_button_disabled restrictedToolTip" target="_blank" data-tooltipelement="restrictedToolTip"></span>
					<?php else: ?>
						<a href="/supplier/profile/s/<?=$this->supplierUrlPart?>#contact_box" class="contact_supplier_button contact_toggle">
						<i class="fa fa-phone-square" aria-hidden="true"></i>
						<i class="fa fa-envelope" aria-hidden="true"></i>
						<span>Contact this Supplier</span>
						<i class="fa fa-envelope" aria-hidden="true"></i>
						<i class="fa fa-phone-square" aria-hidden="true"></i>
						</a>
					<?php endif ?>
				</div>
				<?php

				if ($this->supplier->categories) {
					?>
					<div class="section_header_blue">
						<h4>Categories</h4>
					</div>
					<div class="section_body">
						<ul class="basic">
							<?php
							foreach ($this->supplier->categories as $cat) {
								?>
								<li id="<?php echo $cat['id'];?>"><a href="/category/<?php echo $this->string()->sanitiseForURI(($cat['browsePageName']) ? $cat['browsePageName'] : $cat['name']); ?>/<?php echo $cat['id']; ?>"><?php echo ($cat['browsePageName']) ? $cat['browsePageName'] : $cat['name'];?></a></li>
								<?php
							}
							?>
						</ul>
					</div>

					<?php
				}

				if ($this->supplier->brands || $this->supplier->ownedBrands) {
					echo $this->partial(
                        'supplier/brands.phtml', 
                        array('brands' => $this->supplier->brands,
						'brandAdditionalInfo' => $this->brandAdditionalInfo,
						'supplier' => $this->supplier,
						'userHasAdminRights' => $this->userHasAdminRights)
			        );
				}

				if ($this->supplier->memberships) {
					$memberships = $this->supplier()->memberships($this->supplier->memberships);
					?>
					<div class="section_header_blue">
						<div id="SSVerSysMem-<?php echo $this->supplier->tnid; ?>" class="ss-ver-system" style="float:right;">
							<div style="width:25px;padding:6px 0;"><img src="/img/profile/svs.png" width="64" height="23" style="padding: 0;position: relative;top: -9px;left: -45px;"/></div>
							<div class="clear"></div>
						</div>
						<h4>Memberships</h4>
					</div>
					<?php
					if (lg_count($memberships['verifiedMemberships']) > 0) {
					?>
					<div class="section_subheader_complex" style="padding-top:0px">
						<div style="float:left; width:210px;padding:8px 0;">Verified as Member of</div>
						<div class="clear"></div>
					</div>
					<div class="section_body">
						<ul class="affiliations">
							<?php
							foreach ($memberships['verifiedMemberships'] as $membership) {
								?>
								<li <?php
										if (strlen($membership["logoFileName"])>0) {
											if (strpos($membership["logoFileName"],"http")!==false) {
												echo 'style="background: url(' . $this->CDNLink()->image('/images/layout_v2/memberships/'.$membership['id'].'.gif') . ') 0 4px / 20px 20px no-repeat;"';
											} else {
												echo 'style=\'background: url("'.$this->supplier()->smallAffiliateLogo($membership["logoFileName"]).'") no-repeat scroll 0 4px / 20px 20px transparent;\'';
											}
										} ?>><?php echo $membership['name'];?></li>
								<?php
							}
							?>
						</ul>
					</div>
					<?php
					}
					if (lg_count($memberships['nonVerifiedMemberships']) > 0) {
					?>
					<div class="section_subheader">
						Not Yet Verified as Member of
					</div>
					<div class="section_body">
						<ul class="affiliations">
							<?php
							foreach ($memberships['nonVerifiedMemberships'] as $membership) {
								?>
								<li <?php
									if (strlen($membership["logoFileName"])>0) {
										if (strpos($membership["logoFileName"],"http")!==false) {
											echo 'style="background: url(' . $this->CDNLink()->image('/images/layout_v2/memberships/'.$membership['id'].'.gif') . ') 0 4px / 20px 20px no-repeat;"';
										} else {
											echo 'style=\'background: url("'.$this->supplier()->smallAffiliateLogo($membership["logoFileName"]).'") no-repeat scroll 0 4px / 20px 20px transparent;\'';
										}
									}
								?>><?php echo $membership['name'];
										if ($membership["is_authorised"]=="N" && (int)$membership['ownersCount'] === 0) echo ' <img src="/images/layout_v2/profile/icon_pending_verification.gif" width="116" height="13" border="0" alt="0" style="vertical-align:top; padding-left:5px"/>';
									?></li>
								<?php
							}
							?>
						</ul>
					</div>
					<?php
					}
					?>

					<div class="clear"></div>
					<?php
				}

				if ($this->supplier->certifications) {
					?>
					<div class="section_header_blue">
						<h4>Certifications</h4>
					</div>
					<?php
					if (lg_count($this->supplier->certifications) > 0) {
					?>
					<div class="section_body">
						<ul class="affiliations">
							<?php
							foreach ($this->supplier->certifications as $certification) {
								?>
								<li <?php
									if (strlen($certification["logoFileName"])>0) {
										if (strpos($certification["logoFileName"],"http")!==false) {
											echo 'style="background: url(' . $this->CDNLink()->image('/images/layout_v2/memberships/'.$certification['id'].'.gif') . ') 0 4px / 20px 20px no-repeat;"';
										} else {
											echo 'style=\'background: url("'.$this->supplier()->smallAffiliateLogo($certification["logoFileName"]).'") no-repeat scroll 0 4px / 20px 20px transparent;\'';
										}
									}
								?>><?php echo $certification['name'];?></li>
								<?php
							}
							?>
						</ul>
					</div>
					<?php
					}
					?>

					<div class="clear"></div>
					<?php
				}
				
			if ($supplierHomePageUrl) { ?>
				<div class="content_weblink_wrapper">
					Website: <a href="<?php echo $supplierHomePageUrl; ?>" target="_blank"><?php echo $supplierHomePageUrl; ?></a>
				</div>
			<? } ?>

			<div class="content_supplier_wrapper">
				<?php if ($countryRestricted === true): ?>
					<span rel="nofollow" class="send_enquiry_button_disabled restrictedToolTip" target="_blank" data-tooltipelement="restrictedToolTip"></span>
				<?php else: ?>
					<a href="/supplier/profile/s/<?=$this->supplierUrlPart?>#contact_box" class="contact_supplier_button contact_toggle">
					Contact Supplier
				</a>
				<?php endif ?>
			</div>

			</div>

			<div class="content_wide_body_right">
				<div class="share profile">
                                        <script src="https://platform.linkedin.com/in.js" type="text/javascript"></script>

                                        <!--[if lt IE 8]>
                                        <div style="margin-right: 35px;">
                                        <![endif]-->

                                            <script type="IN/Share" data-url="<?php echo $this->supplierURL; ?>" og:title="LI Title!"  data-counter="right"></script>
                                        <!--[if lt IE 8]>
                                            </div>
                                        <![endif]-->
                                        <g:plusone class="google_plus_one"></g:plusone>
				</div>
				<div class="logo" style="clear:both;">
					<?php
					if ($this->supplier->logoUrl) {
						$logoUrl = str_replace('https://www.shipserv.com', 'https://cdn1.shipserv.com', $this->supplier->logoUrl);
						?>
						<img src="<?php echo $logoUrl; ?>" alt="logo"/>
						<?php
					}
					?>
				</div>
				<p class="address">
					<?php echo $this->supplier()->address($this->supplier, "<br />\n", array('url' => true, 'phone' => true, 'withholdContactDetails' => true)); ?>
				</p>
				<div class="zz button red medium contactBtn">
					<a href="/supplier/profile/s/<?=$this->supplierUrlPart?>#contact_box" class="contact_toggle">
						Contact this Supplier
					</a>
				</div>
				<div class="tnidLink zz button white medium">
					View TradeNet ID number
				</div>
				<div class="clear"></div>

				<?php if ((int)$this->supplier->onsiteInspected  === 1): ?>
					<div class="side_section_verification">
						<img src="/images/profile/Onsite-inspected-logo.png" alt="On-Site Inspected">
						<img src="/images/profile/BureauVeritas_logo.png" alt="Vureau Veritas">
						<p>
							<a href="http://www.bureauveritas.co.uk/" class="veritasInfo" data-tooltip="
								This service is operated by fully independent Bureau Veritas Marine &amp; Offshore, 
								a subsidiary of Bureau Veritas Group, specialists in the Classification and Certification 
								of ships and offshore units. 
								Bureau Veritas is a global leader in Testing, Inspecting and Certification services, 
								serving more than 400,000 companies globally.">
								Bureau Veritas
							</a> has conducted an On-Site Inspection of this supplier. View the report for FREE by clicking the button below:
						</p>
						<?php if ($this->supplier->onsiteVerRptUrl): ?>
							<a target="_blank" href="/reports/download?spbBranchCode=<?php echo $this->supplier->tnid; ?>&redirect=<?php echo urlencode($this->supplier->onsiteVerRptUrl); ?>">
								<div class="button white medium">
									View report
								</div>
							</a>
						<?php endif ?>
						<div class="clear"></div>
					</div>
				<div class="clear"></div>
				<?php endif ?>

                <?php if ((int)Myshipserv_Config::getIni()->google->services->maps->display === 1): ?>
                    <div class="side_section_header findUs">
                        <h4>Find Us</h4>
                    </div>

                    <div id="map1" class="map"></div>
                <?php endif ?>

                <?php
                    $portRestrictText = '<span style="color: red;margin-left: 6px;">(restricted)</span>';
                ?>

				<?php if (lg_count($this->ports['presence']) > 0): ?>
					<div class="side_section_header">
						<h4>Ports of Presence</h4>
					</div>
	
					<ul class="ports">
						<?php foreach ($this->ports['presence'] as $port): ?>
                            <?php
                                $portName = $port['name'];
                                $portName .= ((int)$port['restricted'] === 1) ? $portRestrictText  : '';
                            ?>
							<li id="<?php echo $port['id'];?>"><?php echo $portName;?></li>
						<?php endforeach ?>
					</ul>
				<?php endif ?>

				<?php if (lg_count($this->ports['served']) > 0): ?>
					<div class="side_section_header">
						<h4>Other Ports Served</h4>
					</div>
	
					<ul class="ports">
						<?php foreach ($this->ports['served'] as $port): ?>
                            <?php
                                $portName = $port['name'];
                                $portName .= ((int)$port['restricted'] === 1) ? $portRestrictText  : '';
                            ?>
							<?php if ($port['id'] == null): ?>
								<li><?php echo $portName;?></li>
							<?php else: ?>
								<li id="<?php echo $port['id'];?>"><?php echo $portName;?></li>
							<?php endif ?>
						<?php endforeach ?>
					</ul>
				<?php endif ?>
				
				<?php 
				//shipserv.supplier.dt.tnid
				if ($this->supplier->attachments || $this->config['shipserv']['supplier']['dt']['tnid'] == $this->supplier->tnid) {
					?>
					<div class="side_section_header">
						<h4>Documents</h4>
					</div>
					<?php
				}
				?>

				<ul class="basic">
					<?php
					foreach ($this->supplier->attachments as $att) {
						$url = Myshipserv_Helper_CdnDecorate::decorateImgUrl($att['url']);
						?>
						<li class="<?php echo strtolower(substr($att['name'], strrpos($att['name'], '.') + 1)); ?>"><a href="<?php echo $att['url'];?>" target="_blank"><?php echo ($att['description']!="")?$att['description']:$att['name'];?></a></li>
						<?php
					}

					if ($this->config['shipserv']['supplier']['dt']['tnid'] == $this->supplier->tnid) {
						?>
						<li><a href="/supplier/danish-tools/hand-machine-taps">Hand & Machine Taps</a></li>
						<li><a href="/supplier/danish-tools/round-nut-square-dies">Round, Nut & Square Dies</a></li>
						<li><a href="/supplier/danish-tools/tool-sets">Tool Sets, Auxiliaries</a></li>
						<li><a href="/supplier/danish-tools/thread-gauges">Thread Gauges & Repair Sets</a></li>
						<li><a href="/supplier/danish-tools/drills-counter-sinks">Drill & Counter Sinks</a></li>
						<li><a href="/supplier/danish-tools/special-tooling">Special non standard tools</a></li>
						<?
					}
					?>
				</ul>

			</div>

			<div class="clear"></div>

			<?php
			if (!$this->supplier->premiumListing) {
				echo $this->partial(
                    'supplier/basic-listing-cta.phtml',
					array('supplier' => $this->supplier, 'statsProfile' => $this->statsProfile)
		        );
			}
			?>

			</div><!--End Profile Box-->
				<!-- Start Contect Box -->
				<div id="contact_content" style="display:none;">
					<div class="content_wide_body_left" style="padding-top:10px;margin-top:0;">
						<div class="mainMenu">
						<!-- new design -->
						<div class="contact_toggle_spacer"&nbsp;></div>
						<?php if ($this->supplier->publicEmail !== ''): ?>
						<div class="contact_toggle_wrapper">
							<div class="contact_toggle_email">
								<i class="fa fa-envelope" aria-hidden="true"></i>
							</div>
							<p>Email</p>
							<span>
								<i class="fa fa-angle-down" aria-hidden="true"></i>
							</span>
						</div>

						<div class="contact_toggle_email_content">
							<div class="contactEmailBox">
								<b>Email:</b> <a href="mailto:<?php echo $this->supplier->publicEmail; ?>"><?php echo $this->supplier->publicEmail; ?></a><br>
							</div>
						</div>
						<?php endif ?>

						<div class="contact_toggle_wrapper">
							<div class="contact_toggle_phone">
								<i class="fa fa-mobile" aria-hidden="true"></i>
							</div>
							<p>Contacts &amp; Telephone numbers</p>
							<span>
								<i class="fa fa-angle-down" aria-hidden="true"></i>
							</span>
						</div>

						<div class="contact_toggle_phone_content">
							<div class="contactDetailBox">
								<div class="supContBox">
									<p>Phone: <?=$contactDets['phone']?></p>
									<p>After hours: <?=$contactDets['afterHoursNo']?></p>
									<p>Fax: <?=$contactDets['fax']?></p>
								</div>
								<?php
								foreach ($this->supplier->contacts as $contact) {
									if ($contact['status'] == 'PUBLISHED' && $this->supplier->premiumListing == "1") {
										?>
										<div class="section_header"></div>

										<table>
											<tr>
												<td class="column1">&nbsp;</td>
												<td colspan="2">
													<h2><?php echo $contact['firstName']; ?> <?php echo $contact['lastName']; ?></h2>
												</td>
											</tr>
											<tr>
												<td class="column1">&nbsp;</td>
												<td colspan="2"><?php echo $contact['jobTitle']; ?></td>
											</tr>
											<?php
											if ($contact['phoneNo']) {
												?>
												<tr>
													<td class="column1">phone</td>
													<td colspan="2">
														<span style="color:#000">
														<?php
															if (strtolower( $this->supplier->countryCode ) == "us" || strtolower( $this->supplier->countryCode ) == "ca") {
																echo $this->supplier()->fixUSAndCanadaNumber( $contact['phoneNo'] );
															} else {
																echo $contact['phoneNo'];
															}
														?>
														</span>
													</td>
												</tr>
												<?php
											}

											if ($contact['mobileNo']) {
												?>
												<tr>
													<td class="column1">mobile</td>
													<td colspan="2">
														<span style="color: #000">
														<?php
															if (strtolower( $this->supplier->countryCode ) == "us" || strtolower( $this->supplier->countryCode ) == "ca") {
																echo $this->supplier()->fixUSAndCanadaNumber( $contact['mobileNo'] );
															} else {
																echo $contact['mobileNo'];
															}
														?>
														</span>
													</td>
												</tr>
												<?php
											}
											?>
										</table>
										<?php
									}
								}
								?>
							</div>
						</div>

						<div class="contact_toggle_wrapper">
							<div class="contact_toggle_tnid">
								<img src="/img/shipserv-logo-icon.svg">
							</div>
							<p>TradeNet ID number</p>
							<span>
								<i class="fa fa-angle-down" aria-hidden="true"></i>
							</span>
						</div>

						<div class="contact_toggle_tnid_content">
							<div class="tnidBox">
								<div class="tnidTitle">Supplier TradeNet ID:</div>
								<div class="tnidHolder"><?php echo $this->supplier->publicTnid; ?></div>
								<hr>
								<div class="copyText">
									Select TradeNet ID <strong><?php echo $this->supplier->publicTnid; ?></strong>, Copy and Paste into your purchasing system.
								</div>
							</div>
						</div>

						<?php if ($supplierHomePageUrl): ?>
							<a href="<?php echo $supplierHomePageUrl; ?>" target="_blank" class="website_btn">Website</a>
						<?php endif ?>
		
						<a href="/enquiry/index/clearBasket/1/tnid/<?= $this->supplier->tnid?>" rel="nofollow" class="rfq_btn" target="_blank">Send RFQ</a>
							
						<!-- end new design -->
						</div>
					</div>

					<div class="content_wide_body_right">
						<div class="logo">
							<?php
							if ($this->supplier->logoUrl) {
								?>
								<img src="<?php echo $this->supplier->logoUrl; ?>" alt="logo" />
								<?php
							}
							?>
						</div>

						<p class="address">
							<?php echo $this->supplier()->address($this->supplier, "<br />\n", array('url' => false, 'phone' => false, 'withholdContactDetails' => false)); ?>
						</p>

                        <?php if ((int)Myshipserv_Config::getIni()->google->services->maps->display === 1): ?>
						<div class="side_section_header findUs">
							<h4>Find us</h4>
						</div>
						<div id="map3" class="map"></div>
                        <?php endif ?>

						<?php
						if($this->supplier->ports) {
							?>
							<div class="side_section_header">
								<h4>Ports Served</h4>
							</div>

							<ul class="ports">
								<?php
								foreach ($this->supplier->ports as $port) {
									?>
									<li id="<?php echo $port['code'];?>"><?php echo $port['name'];?>, <?php echo $port['countryCode'];?></li>
									<?php
								}
								?>
							</ul>
							<?php
						}
						?>
					</div>
					<div class="clear"></div>

					<?php
					if (!$this->supplier->premiumListing) {
						echo $this->partial(
				            'supplier/basic-listing-cta.phtml',
							array('supplier' => $this->supplier, 'statsProfile' => $this->statsProfile)
				        );
					}
					?>
			</div>
			<!--End Contact Box-->

            <script type="text/javascript">
                <!--
                $(document).ready(function(){
                    $('#closeMapButton').click(function (e) {
                        e.preventDefault();
                        $('#mask').hide();
                        $('#map_tooltip').hide();
                    });
                    $('#mask').click(function (e) {
                        e.preventDefault();
                        $('#map_tooltip').hide();
                    });

                });
                //-->
            </script>
            <div id="map_tooltip" style="display: none;">
                <div id="topToolBar" style="height:40px;">
                        <div id="closeMapButton"></div>
                        <div class="clear"></div>
                </div>
                <div id="map_body">
                    <div class="zz header">
                        <h2>Map</h2>
                    </div>
                    <div class="cont">
                        <div id="map_box">

                            <!--Needs inline style to make map centre properly-->
                            <div id="map2" class="map_large" style="width: 420px; height: 400px;"></div>
                            <br/>
                            <p class="address">
                                <?php echo $this->supplier()->address($this->supplier, "<br />\n", array('url' => true, 'phone' => true, 'withholdContactDetails' => true)); ?>
                                <a href="/enquiry/index/clearBasket/1/tnid/<?= $this->supplier->tnid?>" rel="nofollow" style="font-weight:bold;">&raquo; Email this supplier or send them an Enquiry or RFQ</a>
                            </p>

                            <div class="clear"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="catalogue_box">
                <div class="sidebar">
                    <div class="sidebar_browse_header">
                        <h3>Catalogue</h3>
                        <p>
                            <a style=" display:none;" class="clear_search" href="#">Clear Search</a>
                        </p>
                    </div>
                    <div id="sidebar-nav-new" class="demo"></div>
                    <div id="sidebar-footer-new"></div>
                </div>
				
				<div id="catalogue-result-loader" class="content_body_new" style="padding: 10px 0; display: block; text-align:center">
					<img src="data:image/gif;base64,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" alt="" />
				</div>

                <div id="product-results" style="display:none;" class="content_body_new"></div>
                <div class="clear"></div>
            </div>

            <div id="reputation_box" <?if($this->defaultTab != 'reviews'):?>style="display: none;"<?endif?>>
                <?if($this->defaultTab == 'reviews'):?>
                    <?php echo $this->partial('/reviews/supplier.phtml', $this)?>
                <?endif?>
			</div>

	</div>
	<div class="content_wide_footer_shadow">
	</div>
	<div class="clear"></div>

</div>

	<div class="zone">
		<div style="padding-top: 20px;"></div>
		<?php
		if($SupTnid == 58341 ){
			echo $this->partial('rs-google-ads.phtml');
		}
		else {
			// show general adunits (default)
			if ($targetedAdSlot === null || lg_count($targetedAdSlot) == 0)
			{
				echo $this->partial('general-google-ads.phtml');
			}
			// if we have something in the database to override this by the spotlight then show this instead
			else
			{
				echo $this->partial('general-google-ads.phtml', array('adUnits' => $targetedAdSlot));
			}
		}?>
	</div>

</div>

<div class="clear"></div>
<div id="modal">
    <div class="modalControls"><div class="close" data-dismiss="modal" aria-hidden="true">Close</div></div>
    <div class="modalBody"></div>
</div>

<?php if ($countryRestricted === true): ?>
    <div id="restrictedToolTip">
        You are not able to send RFQs via ShipServ Pages to this supplier. This is because the supplier serves a restricted port or country
    </div>
<?php endif ?>

<script type="text/javascript">
	$(document).ready(function(){

		$('input[name=searchWhat]').autoComplete({
			backwardsCompatible: true,
			ajax: '/search/autocomplete/what/format/json/',
			useCache: false,
			minChars: 3,
			preventEnterSubmit: true,
			tabToNext: 'input[name=searchText]',
			leftAdjustment: -8,
			width: 325,
			onSelect: function(data, $li){
				$('#searchWhat').val(data.code);
				$('#searchType').val(data.type);

				if( data.url ){
					location.href = data.url;
				}

			}
		});

		$('input[name=searchText]').autoComplete({
			backwardsCompatible: true,
			ajax: '/search/autocomplete/portsAndCountries/format/json/',
			useCache: false,
			minChars: 3,
			preventEnterSubmit: true,
			width: 325,
			leftAdjustment: -8,
			onSelect: function(data, $li){
				$('#searchWhere').val(data.code);
				$('input[name=searchText]').val(data.value);
			}
		});

		$('#searchWhat').keypress(function(e) {
			if (e.which == '13') {
				$('#anonSearch').submit();
			}
		});

		$('#searchText').keypress(function(e) {
			if (e.which == '13') {
				$('#anonSearch').submit();
			}
		});

        $('#searchText').focus(function(e) {
            $('#searchWhere').val('');
        });
        
		$('#anonSearch').live('submit', function(e) {
			e.preventDefault();
			var self = this;
			if (!$('#search_box') || !$('#search_box').hasClass('zone_search_box')) {
				$('a.search-button').html('<img src="/images/buttons/search-button-animated-whitebg.gif" alt="" />');
			}
			if ($('#search_box') && $('#search_box').hasClass('zone_search_box')) {
				$('a.search-button').html('<div id="animitedSearchButtonIcon"></div>');
			}

			window.setTimeout(function() {
				self.submit();
			}, 100);
		});

		$('#searchButton').live('click', function(e) {
			e.preventDefault();
			if( typeof window.searchIsOngoing == 'undefined' )
			{
				$(this).attr('disabled', 'disabled');
				window.searchIsOngoing = true;
				$('#anonSearch').submit();
			}
	    });

        <?php if ($countryRestricted === true): ?>
        $('.restrictedToolTip').shTooltip({
            displayType : 'top',
            onClick : true
        });
        <?php endif ?>

	});
</script>

<?php
// seo script for specific suppliers
if ($this->supplier->tnid == 72232 || $this->supplier->tnid == 52323) { ?>
<script type="text/javascript">
    setTimeout(function(){
        var a=document.createElement("script");
        var b=document.getElementsByTagName("script")[0];
        a.src=document.location.protocol+"//dnn506yrbagrg.cloudfront.net/pages/scripts/0017/6893.js?"+Math.floor(new Date().getTime()/3600000);
        a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}
    , 1);
</script>
<?php } ?>


<script type="text/javascript">
	var map1,
		map2,
		map3,
		marker1,
		marker2,
		marker3;
    <?php if ((int)Myshipserv_Config::getIni()->google->services->maps->display === 1): ?>
	function initMaps() {
		<?php
		if ($latlong !== "false") { ?>
			var latlong1 = new google.maps.LatLng(<?=$latlong?>);
			var latlong2 = new google.maps.LatLng(<?=$latlong?>);
			var latlong3 = new google.maps.LatLng(<?=$latlong?>);

			var mapOptions1 = {
    			zoom: 13,
    			center: latlong1
    		}

    		var mapOptions2 = {
    			zoom: 13,
    			center: latlong2
    		}

    		var mapOptions3 = {
    			zoom: 13,
    			center: latlong3
    		}

      		map1 = new google.maps.Map(document.getElementById("map1"), mapOptions1);

        	marker1 = new google.maps.Marker({
            	map: map1,
            	position: latlong1,
            	title: '<?php echo addslashes($opTitle); ?>'
            });

            map2 = new google.maps.Map(document.getElementById("map2"), mapOptions2);

        	marker2 = new google.maps.Marker({
            	map: map2,
            	position: latlong2,
            	title: '<?php echo addslashes($opTitle) ?>'
            });

            map3 = new google.maps.Map(document.getElementById("map3"), mapOptions3);

            marker3 = new google.maps.Marker({
            	map: map3,
            	position: latlong3,
            	title: '<?php echo addslashes($opTitle) ?>'
            });
		<?} else {?>
			geocoder =  new google.maps.Geocoder();
		    geocoder.geocode( { 'address': '<?=addslashes($address);?>'}, function(results, status) {
		    	if (status == google.maps.GeocoderStatus.OK) {
		    		var mapOptions = {
		    			zoom: 13,
		    			center: results[0].geometry.location
		    		}

		      		map1 = new google.maps.Map(document.getElementById("map1"), mapOptions);

		        	marker1 = new google.maps.Marker({
		            	map: map1,
		            	position: results[0].geometry.location,
		            	title: '<?php echo addslashes($opTitle); ?>'
		            });

		            map2 = new google.maps.Map(document.getElementById("map2"), mapOptions);

		        	marker2 = new google.maps.Marker({
		            	map: map2,
		            	position: results[0].geometry.location,
		            	title: '<?php echo addslashes($opTitle); ?>'
		            });

		            map3 = new google.maps.Map(document.getElementById("map3"), mapOptions);

		            marker3 = new google.maps.Marker({
		            	map: map3,
		            	position: results[0].geometry.location,
		            	title: '<?php echo addslashes($opTitle); ?>'
		            });

		        }
		        else {
		        	$('.findUs,#map1,#map2,#map3').hide();
		        }
		    });
  		<?php } ?>
	}

	initMaps();
    <?php endif ?>
</script>

